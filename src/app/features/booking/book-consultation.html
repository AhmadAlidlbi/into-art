<section class="hero">
  <div class="container hero__grid">
    <!-- LEFT -->
    <div class="hero__content">
      <span class="hero__badge">Book Consultation</span>

      <h1 class="hero__title">Let’s plan your interior project properly</h1>

      <p class="hero__subtitle">
        Share a few details and we’ll confirm your consultation with the right specialist. This is
        the fastest way to get clear direction for your space.
      </p>

      <ul class="trust">
        <li>✓ Kuwait-based team</li>
        <li>✓ Residential focus</li>
        <li>✓ Structured workflow</li>
      </ul>
    </div>

    <!-- RIGHT -->
    <div class="card form-card">
      <header class="card__header">
        <h3>Consultation request</h3>
        <p>Fields marked with * are required.</p>
      </header>

      <form class="form" [formGroup]="form" (ngSubmit)="submit()">
        <!-- STEP 1 -->
        <section class="form-section">
          <h4>1. Your details</h4>

          <div class="row">
            <label class="field">
              <span>Full name *</span>
              <input class="field__input" type="text" formControlName="fullName" />
              <small
                class="field__error"
                *ngIf="form.controls.fullName.touched && form.controls.fullName.invalid"
              >
                Please enter your name
              </small>
            </label>

            <label class="field">
              <span>Contact number *</span>
              <input class="field__input" type="tel" formControlName="phone" />
              <small
                class="field__error"
                *ngIf="form.controls.phone.touched && form.controls.phone.invalid"
              >
                Please enter a valid phone number
              </small>
            </label>
          </div>
        </section>

        <!-- STEP 2 -->
        <section class="form-section">
          <h4>2. Building condition *</h4>

          <div class="radio-group">
            <label class="radio">
              <input type="radio" value="New building" formControlName="buildingCondition" />
              <span>New building</span>
            </label>

            <label class="radio">
              <input type="radio" value="Restoration" formControlName="buildingCondition" />
              <span>Restoration</span>
            </label>

            <label class="radio">
              <input type="radio" value="Other" formControlName="buildingCondition" />
              <span>Other</span>
            </label>
          </div>

          <label class="field" *ngIf="form.value.buildingCondition === 'Other'">
            <input
              class="field__input"
              type="text"
              placeholder="Please specify"
              formControlName="buildingConditionOther"
            />
          </label>
        </section>

        <!-- STEP 3 -->
        <section class="form-section">
          <h4>3. Design package *</h4>

          <div class="radio-group">
            <label class="radio">
              <input
                type="radio"
                value="Two-space design package"
                formControlName="designPackage"
              />
              <span>Two-space design package</span>
            </label>

            <label class="radio">
              <input type="radio" value="4-space design package" formControlName="designPackage" />
              <span>4-space design package</span>
            </label>

            <label class="radio">
              <input type="radio" value="5-space design package" formControlName="designPackage" />
              <span>5-space design package</span>
            </label>

            <label class="radio">
              <input type="radio" value="Floor Design Package" formControlName="designPackage" />
              <span>Floor Design Package</span>
            </label>

            <label class="radio">
              <input
                type="radio"
                value="Complete coupon design package"
                formControlName="designPackage"
              />
              <span>Complete coupon design package</span>
            </label>
          </div>
        </section>

        <!-- STEP 4 -->
        <section class="form-section">
          <h4>4. Preferred date *</h4>

          <mat-form-field class="material-field">
            <input
              matInput
              [matDatepicker]="picker"
              formControlName="preferredDate"
              [min]="today"
              [matDatepickerFilter]="dateFilter"
              (dateChange)="onDateSelected($event.value)"
              readonly
              (click)="picker.open()"
            />

            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>

          <small class="hint">Saturday–Thursday only. Fridays unavailable.</small>

          <div class="field">
            <span>Preferred time *</span>

            <!-- LOADING -->
            <p class="hint" *ngIf="loadingSlots()">Checking availability…</p>

            <!-- AVAILABLE SLOTS -->
            <div class="time-slots" *ngIf="!loadingSlots() && availableHours().length > 0">
              <button
                type="button"
                class="time-slot"
                *ngFor="let h of HOURS"
                [disabled]="!availableHours().includes(h)"
                [class.active]="form.controls.preferredHour.value === h"
                (click)="selectHour(h)"
              >
                {{ h }}
              </button>
            </div>

            <!-- NO SLOTS -->
            <p
              class="no-slots"
              *ngIf="!loadingSlots() && hasSelectedDate() && availableHours().length === 0"
            >
              All time slots for this date are fully booked.
            </p>
          </div>
        </section>

        <button class="submit" type="submit" [disabled]="form.invalid || isSubmitting()">
          {{ isSubmitting() ? 'Submitting…' : 'Request consultation' }}
        </button>

        <p class="privacy">We’ll contact you only to confirm your appointment.</p>
      </form>
    </div>
  </div>
</section>
